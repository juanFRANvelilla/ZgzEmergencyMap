namespace: pre-jf-zgz-emergency-map-back
replicaCount: 1
registry: harbor.server.local/danielbeltejar/zgz-emergency-map-backend
image:
  pullPolicy: IfNotPresent
service:
  type: ClusterIP
  port: 8080
  targetPort: 8080
probes:
  startup:
    enabled: true
    path: /actuator/health/liveness
    initialDelaySeconds: 10
    periodSeconds: 5
    timeoutSeconds: 3
    failureThreshold: 60
  readiness:
    enabled: true
    path: /actuator/health/readiness
    initialDelaySeconds: 5
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 3
  liveness:
    enabled: true
    path: /actuator/health/liveness
    initialDelaySeconds: 5
    periodSeconds: 20
    timeoutSeconds: 5
    failureThreshold: 3
extraEnv:
- name: "TZ"
  value: "UTC"
- name: "JAVA_OPTS"
  value: "-Xmx512m -Xms256m -XX:+UseG1GC -XX:MaxGCPauseMillis=100"
extraEnvFrom:
- secretRef:
    name: backend-secrets
resources:
  requests:
    memory: "512Mi"
    cpu: 200m
  limits:
    memory: "1Gi"
    cpu: 1000m
ingress:
  enabled: true
  annotations:
    nginx.ingress.kubernetes.io/proxy-set-header: X-Real-IP $remote_addr
    nginx.ingress.kubernetes.io/use-forwarded-headers: "true"
    nginx.ingress.kubernetes.io/proxy-body-size: "10m"
    nginx.ingress.kubernetes.io/enable-cors: "true"
    nginx.ingress.kubernetes.io/cors-allow-origin: "*"
    nginx.ingress.kubernetes.io/cors-allow-methods: "GET, POST, PUT, DELETE, OPTIONS, PATCH"
    nginx.ingress.kubernetes.io/cors-allow-headers: "DNT,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range,Authorization,X-Session-Id"
    nginx.ingress.kubernetes.io/cors-allow-credentials: "false"
    nginx.ingress.kubernetes.io/cors-max-age: "3600"
    cert-manager.io/cluster-issuer: letsencrypt-ovh
  class: "nginx-local"
  host: "api.zgz-emergency-map.pre.danielbeltejar.es"
  tls: true

# Configuraci√≥n de base de datos
database:
  host: "zgz-emergency-map-db-rw.pre-jf-zgz-emergency-map-back.svc.cluster.local"
  port: "5432"
  name: "zgzEmergencyMap"
